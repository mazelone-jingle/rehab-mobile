(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"3fn3":function(n,e,i){"use strict";i.r(e),i.d(e,"BleTestPageModule",function(){return f});var c=i("ofXK"),t=i("3Pt+"),o=i("TEn/"),s=i("tyNb"),b=i("mrSG"),l=i("nYR2"),d=i("fXoL"),r=i("/zZW");function a(n,e){if(1&n){const n=d.Ob();d.Nb(0,"ion-item",6),d.Vb("click",function(){d.fc(n);const i=e.$implicit;return d.Xb().connect(i.id)}),d.jc(1),d.Yb(2,"json"),d.Mb()}if(2&n){const n=e.$implicit;d.Ab(1),d.lc(" ",d.Zb(2,1,n)," ")}}function u(n,e){if(1&n&&(d.Nb(0,"ion-item"),d.Nb(1,"ion-label"),d.jc(2),d.Yb(3,"uppercase"),d.Mb(),d.Lb(4,"ion-radio",7),d.Mb()),2&n){const n=e.$implicit;d.Ab(2),d.kc(d.Zb(3,2,n)),d.Ab(2),d.cc("value",n)}}const h=[{path:"",component:(()=>{class n{constructor(n,e,i){this.zone=n,this.loadingController=e,this.ble=i,this.scanning=null,this.commands=["RND#@","BAT#@","RTS#@","DEL#@","RTH#@","RTE#@","RHD#@","ROK#@","REQ#@"],this.selectedCommand="BAT#@",this.devices=[],this.connectedDeviceId=null}scan(){return Object(b.a)(this,void 0,void 0,function*(){yield this.presentScanning(),this.ble.scan().pipe(Object(l.a)(()=>this.dismissScanning())).subscribe(n=>{this.devices.length=0,this.zone.run(()=>{this.devices.indexOf(e=>e.id==n.id)<0&&this.devices.push(n),console.log("devices",n)})})})}connect(n){confirm("\uc5f0\uacb0\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(this.connectedDeviceId=n,this.ble.connect(n).subscribe(e=>{this.connectedDeviceId=n,this.peripheral=e,console.log("peripheral",e)}))}disconnect(){this.connectedDeviceId&&this.ble.disconnect().then(n=>{alert("disconnected"),console.log("disconnected",n),this.connectedDeviceId=null}).catch(n=>{alert(`disconnect fail, ${n}`)})}writeCommand(){this.ble.writeCommand(this.selectedCommand).then(n=>console.log(`write ${this.selectedCommand} ok`,n)).catch(n=>console.log(`write ${this.selectedCommand} err`,n))}test(){console.log(this)}presentScanning(){return Object(b.a)(this,void 0,void 0,function*(){this.scanning=yield this.loadingController.create({message:"Scan...",duration:5e3}),yield this.scanning.present()})}dismissScanning(){return Object(b.a)(this,void 0,void 0,function*(){yield this.scanning.dismiss()})}}return n.\u0275fac=function(e){return new(e||n)(d.Kb(d.B),d.Kb(o.p),d.Kb(r.a))},n.\u0275cmp=d.Eb({type:n,selectors:[["app-ble-test"]],decls:27,vars:5,consts:[["expand","full",3,"click"],[3,"click",4,"ngFor","ngForOf"],["expand","full",3,"disabled","click"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["expand","full","color","danger",3,"disabled","click"],[3,"click"],["slot","start","color","success",3,"value"]],template:function(n,e){1&n&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-title"),d.jc(3,"ble-test"),d.Mb(),d.Mb(),d.Mb(),d.Nb(4,"ion-content"),d.Nb(5,"ion-list"),d.Nb(6,"ion-item"),d.Nb(7,"ion-button",0),d.Vb("click",function(){return e.scan()}),d.jc(8,"SCAN"),d.Mb(),d.Lb(9,"br"),d.Mb(),d.ic(10,a,3,3,"ion-item",1),d.Nb(11,"ion-item"),d.Nb(12,"ion-button",2),d.Vb("click",function(){return e.disconnect()}),d.jc(13,"DISCONNECT"),d.Mb(),d.Lb(14,"br"),d.Mb(),d.Nb(15,"ion-radio-group",3),d.Vb("ngModelChange",function(n){return e.selectedCommand=n}),d.Nb(16,"ion-list-header"),d.Nb(17,"ion-label"),d.jc(18,"Commands"),d.Mb(),d.Mb(),d.ic(19,u,5,4,"ion-item",4),d.Mb(),d.Nb(20,"ion-item"),d.Nb(21,"ion-button",5),d.Vb("click",function(){return e.writeCommand()}),d.jc(22,"WRITE "),d.Mb(),d.Lb(23,"br"),d.Mb(),d.Nb(24,"ion-item"),d.Nb(25,"ion-button",6),d.Vb("click",function(){return e.test()}),d.jc(26,"TEST"),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&n&&(d.Ab(10),d.cc("ngForOf",e.devices),d.Ab(2),d.cc("disabled",!e.connectedDeviceId),d.Ab(3),d.cc("ngModel",e.selectedCommand),d.Ab(4),d.cc("ngForOf",e.commands),d.Ab(2),d.cc("disabled",!e.connectedDeviceId))},directives:[o.d,o.m,o.l,o.c,o.g,o.e,o.b,c.i,o.j,o.s,t.d,t.e,o.h,o.f,o.i,o.q],pipes:[c.e,c.l],styles:[""]}),n})()}];let m=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.Ib({type:n}),n.\u0275inj=d.Hb({imports:[[s.i.forChild(h)],s.i]}),n})(),f=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.Ib({type:n}),n.\u0275inj=d.Hb({imports:[[c.b,t.a,o.n,m]]}),n})()}}]);