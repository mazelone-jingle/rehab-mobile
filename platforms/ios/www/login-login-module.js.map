{"version":3,"sources":["./src/app/login/login.page.ts","./src/services/alert.service.ts","./src/app/login/login.page.html","./src/app/login/login.module.ts","./src/app/login/login-routing.module.ts","./src/app/login/login.page.scss"],"names":[],"mappings":"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","file":"login-login-module.js","sourcesContent":["import { StorageService } from './../../services/storage.service';\nimport { PrescriptionService } from './../../services/prescription.service';\nimport { IS_REMEMBER_EMAIL, LAST_EMAIL } from 'src/constants/storage-key';\n\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { AlertService } from '../../services/alert.service';\nimport { AuthService } from '../../services/auth.service';\nimport { PermissionService } from '../../services/permission.service';\nimport { PRESCRIPTION } from 'src/constants/common';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  loginForm: FormGroup;\n  get email() { return this.loginForm.get('email'); }\n  get password() { return this.loginForm.get('password'); }\n  get isRememberEmail() { return this.loginForm.get('isRememberEmail'); }\n\n  constructor(\n    private fb: FormBuilder,\n    private router: Router,\n    private alertSvc: AlertService,\n    private permissionSvc: PermissionService,\n    private authSvc: AuthService,\n    private prescriptionSvc: PrescriptionService,\n    private storageSvc: StorageService\n  ) {\n    this.buildForm();\n  }\n\n  async ngOnInit() {\n    const isRememberEmail = localStorage.getItem(IS_REMEMBER_EMAIL);\n    this.isRememberEmail.patchValue(isRememberEmail);\n    if (isRememberEmail) {\n      const lastEmail = localStorage.getItem(LAST_EMAIL);\n      this.email.patchValue(lastEmail);\n    }\n\n    await this.permissionSvc.checkNotification();\n  }\n\n  buildForm() {\n    this.loginForm = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(4)]],\n      isRememberEmail: [false]\n    });\n  }\n\n  login() {\n    if (this.loginForm.valid) {\n\n      const isRememberEmail = this.isRememberEmail.value;\n      localStorage.setItem(IS_REMEMBER_EMAIL, isRememberEmail);\n      if (isRememberEmail) {\n        localStorage.setItem(LAST_EMAIL, this.email.value);\n      } else {\n        localStorage.removeItem(LAST_EMAIL);\n      }\n\n\n      this.authSvc.login(this.loginForm.value).subscribe({\n        next: () => {\n          this.prescriptionSvc.getLastPrescription(this.authSvc.username)\n          .subscribe(async newPrescription => {\n            const msg = '새로운 처방전을 받았습니다.';\n            await this.storageSvc.set(PRESCRIPTION, newPrescription);\n            await this.alertSvc.presentAlert(msg, false, async () => await this.router.navigate(['/menu']));\n          });\n        },\n        error: () => {\n          this.alertSvc.presentAlert(\n            '의사가 승인을 해야 가입이 완료됩니다.',\n            false\n          );\n        }\n      });\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AlertService {\n\n  constructor(private alertController: AlertController) { }\n\n  async presentAlert(msg: string, backdropDismiss: boolean = true, callback = () => {}) {\n    const alert = await this.alertController.create({\n      message: msg,\n      buttons: [{\n        text: '확인',\n        handler: callback\n      }],\n      backdropDismiss,\n    });\n\n    await alert.present();\n  }\n\n  async presentCustomizeAlert(options) {\n    const alert = await this.alertController.create(options);\n    await alert.present();\n  }\n\n}\n","export default \"<div class=\\\"wrap\\\">\\n  <div class=\\\"content\\\">\\n    <img src=\\\"assets/icon/rehab_icon.png\\\" alt=\\\"\\\">\\n    <ion-card class=\\\"card\\\">\\n      <ion-title>{{'login' | translate}}</ion-title>\\n      <form [formGroup]=\\\"loginForm\\\" novalidate *ngIf=\\\"loginForm\\\">\\n        <ion-item class=\\\"form-group\\\">\\n          <ion-label for=\\\"id\\\" position=\\\"fixed\\\">{{'email' | translate}}</ion-label>\\n          <ion-input type=\\\"text\\\" formControlName=\\\"email\\\" class=\\\"form-control\\\" id=\\\"id\\\"></ion-input>\\n          <!--[class.item-inner-highlight]=\\\"email.valid && email.touched\\\"-->\\n        </ion-item>\\n        <div *ngIf=\\\"email.invalid && email.touched\\\">\\n          <small style=\\\"color: red;\\\" *ngIf=\\\"email.errors.required\\\">이메일을 입력해주세요</small>\\n          <small style=\\\"color: red;\\\" *ngIf=\\\"email.errors.email\\\">올바른 이메일 형식이 아닙니다</small>\\n        </div>\\n        <ion-item class=\\\"form-group\\\">\\n          <ion-label for=\\\"pwd\\\" position=\\\"fixed\\\">{{'password' | translate}}</ion-label>\\n          <ion-input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" id=\\\"pwd\\\"></ion-input>\\n        </ion-item>\\n        <ion-item class=\\\"form-group\\\">\\n          <ion-label>{{'is_remember_email' | translate}}</ion-label>\\n          <ion-checkbox slot=\\\"start\\\" formControlName=\\\"isRememberEmail\\\" class=\\\"form-control\\\"></ion-checkbox>\\n        </ion-item>\\n        <div *ngIf=\\\"password.invalid && password.touched\\\">\\n          <small style=\\\"color: red;\\\" *ngIf=\\\"password.errors.required\\\">비밀번호를 입력해주세요</small>\\n          <small style=\\\"color: red;\\\" *ngIf=\\\"password.errors.minlength\\\">비밀번호는 4자리 이상입니다</small>\\n        </div>\\n      </form>\\n\\n      <div class=\\\"register\\\">\\n        <ion-button expand=\\\"block\\\" color=\\\"danger\\\" [routerLink]=\\\"['/register']\\\">{{'register' | translate}}</ion-button>\\n        <ion-button expand=\\\"block\\\" color=\\\"danger\\\" [routerLink]=\\\"['/forgot-password']\\\">{{'forgot_password' | translate}}\\n        </ion-button>\\n      </div>\\n      <ion-button expand=\\\"block\\\" (click)=\\\"login()\\\" [disabled]=\\\"!this.loginForm.valid\\\">{{'login' | translate}}</ion-button>\\n    </ion-card>\\n  </div>\\n</div>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\nimport { FormModule } from 'src/modules/form.module';\nimport { TranslateModule, TranslateLoader, TranslateService } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { map } from 'rxjs/operators';\nimport { LanguageService } from 'src/services/language.service';\nimport { HttpClient } from '@angular/common/http';\n\nconst createTranslateLoader = (http: HttpClient) => new TranslateHttpLoader(http, './assets/i18n/login/', '.json');\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    FormModule,\n    LoginPageRoutingModule,\n    TranslateModule.forChild({\n      loader: {\n          provide: TranslateLoader,\n          useFactory: createTranslateLoader,\n          deps: [HttpClient]\n      },\n      isolate: true\n    })\n  ],\n  declarations: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule {\n  language$ = this.languageService.language$;\n    constructor(\n        private translateService: TranslateService,\n        private languageService: LanguageService,\n    ) {\n        this.language$.pipe(map(language => language.lang)).subscribe(lang => this.translateService.use(lang));\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","export default \"ion-item {\\n  --highlight-height: 0;\\n}\\n\\nion-input, ion-button {\\n  height: 60px;\\n}\\n\\n.title-default {\\n  text-align: center;\\n  margin: 8px 0;\\n  font-weight: bold;\\n}\\n\\n.wrap {\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.wrap .content {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  width: 90%;\\n}\\n\\n.wrap img {\\n  width: 150px;\\n}\\n\\n.card {\\n  width: 100%;\\n  padding: 5px;\\n}\\n\\n.card .button {\\n  font-size: 16px;\\n}\\n\\n.register {\\n  display: flex;\\n}\\n\\n.register .button {\\n  width: 50%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFBO0FBQ0o7O0FBRUE7RUFDSSxZQUFBO0FBQ0o7O0FBRUE7RUFDRSxrQkFBQTtFQUNBLGFBQUE7RUFDQSxpQkFBQTtBQUNGOztBQUVBO0VBQ0UsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBQ0Y7O0FBQUU7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLFVBQUE7QUFFSjs7QUFBRTtFQUNFLFlBQUE7QUFFSjs7QUFFQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0FBQ0Y7O0FBQUU7RUFDRSxlQUFBO0FBRUo7O0FBRUE7RUFDRSxhQUFBO0FBQ0Y7O0FBQUU7RUFDRSxVQUFBO0FBRUoiLCJmaWxlIjoibG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWl0ZW0ge1xyXG4gICAgLS1oaWdobGlnaHQtaGVpZ2h0OiAwO1xyXG59XHJcblxyXG5pb24taW5wdXQsIGlvbi1idXR0b24ge1xyXG4gICAgaGVpZ2h0OiA2MHB4O1xyXG59XHJcblxyXG4udGl0bGUtZGVmYXVsdCB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbjogOHB4IDA7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi53cmFwIHtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIC5jb250ZW50IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHdpZHRoOiA5MCU7XHJcbiAgfVxyXG4gIGltZyB7XHJcbiAgICB3aWR0aDogMTUwcHg7XHJcbiAgfVxyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogNXB4O1xyXG4gIC5idXR0b24ge1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gIH1cclxufVxyXG5cclxuLnJlZ2lzdGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIC5idXR0b24ge1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICB9XHJcbn1cclxuIl19 */\";"],"sourceRoot":"webpack:///"}