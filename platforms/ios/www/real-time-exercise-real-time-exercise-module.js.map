{"version":3,"sources":["./src/services/real-time-exercise.service.ts","./src/app/real-time-exercise/real-time-exercise-routing.module.ts","./src/app/real-time-exercise/real-time-exercise.page.html","./src/app/real-time-exercise/real-time-exercise.module.ts","./src/app/real-time-exercise/real-time-exercise.page.scss","./src/app/real-time-exercise/real-time-exercise.page.ts"],"names":[],"mappings":"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","file":"real-time-exercise-real-time-exercise-module.js","sourcesContent":["import { HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { of } from 'rxjs';\nimport { HttpService } from './http.service';\nimport { IPrescription } from './prescription.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RealTimeExerciseService {\n  private headers: HttpHeaders;\n  constructor(\n    private httpSvc: HttpService\n  ) {\n    this.headers = new HttpHeaders();\n    this.headers = this.headers.set('Content-type', 'application/json');\n  }\n\n  getReservation() {\n    // return this.httpSvc.get('api/Prescription', this.headers)\n    return of(true)\n  }\n\n\n  /**\n   * chart에서 옳은 촛수를 나타나기 위하여, 운동 횟차 > 1 때는, 앞 횟차의 촛수들을 현재 촛수하고 합산함.\n   * @param round: 현재 횟수\n   * @param prescription: 운동 처방\n   * @returns\n   */\n  getBaseSeconds(round: number, prescription: IPrescription) {\n      let baseSeconds = 0;\n      if (round > 1) {\n       const baseMinutes = prescription.steps\n        .map(step => step.minute)\n        .slice(0, round - 1)\n        .reduce((accumulator, currentValue) => accumulator + currentValue);\n       baseSeconds = Math.round(baseMinutes * 60)\n     }\n     return baseSeconds;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RealTimeExercisePage } from './real-time-exercise.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RealTimeExercisePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RealTimeExercisePageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{'real_time_exercise' | translate}}</ion-title>\\n\\n    <ion-buttons slot=\\\"end\\\">\\n      <!-- <ion-button (click)=\\\"stopExercise()\\\"\\n        >stop</ion-button> -->\\n      <ion-button (click)=\\\"startExercise()\\\" [disabled]=\\\"isExercising$ | async\\\"\\n        >{{'exercise_start' | translate}}</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"content\\\">\\n  <div class=\\\"chart-content\\\" style=\\\"height: 50%\\\">\\n    <h3 class=\\\"title\\\">{{'step' | translate}}{{step}} - {{prescription?.steps[step-1]?.type}}</h3>\\n    <ul *ngIf=\\\"!!prescription\\\" class=\\\"steps\\\">\\n      <li\\n        class=\\\"step\\\"\\n        *ngFor=\\\"let round of prescription?.steps; index as i\\\"\\n        [ngClass]=\\\"(step >= i+1)? 'past': ''\\\"\\n      >\\n        {{i+1}}\\n      </li>\\n    </ul>\\n    <div class=\\\"info\\\" *ngIf=\\\"step\\\">\\n      <p>{{prescription?.exerciseTypes}}</p>\\n      <p>\\n        {{seconds | minSec}}/{{totalExerciseTime}}{{'minute' |\\n        translate}}\\n      </p>\\n    </div>\\n\\n    <!-- <ion-button (click)=\\\"sendEmergency()\\\"> 힘들어요 </ion-button> -->\\n    <div id=\\\"canvas\\\" style=\\\"display: block; height: calc(100% - 58px);\\\"></div>\\n  </div>\\n  <ion-content class=\\\"chat-content\\\" style=\\\"height: 50%\\\">\\n    <app-chat [reservId]=\\\"reservId\\\" [channelId]=\\\"channelId\\\" [rpeMsg]=\\\"rpeMsg\\\" (sendCurrentRpeEvent)=\\\"sendEmergency($event)\\\"></app-chat>\\n  </ion-content>\\n</ion-content>\\n\";","import { ComponentsModule } from './../../components/components.module';\nimport { SharedPipesModule } from 'src/pipes/shared-pipes.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RealTimeExercisePageRoutingModule } from './real-time-exercise-routing.module';\n\nimport { RealTimeExercisePage } from './real-time-exercise.page';\nimport { TranslateModule, TranslateLoader, TranslateService } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { map } from 'rxjs/operators';\nimport { LanguageService } from 'src/services/language.service';\nimport { HttpClient } from '@angular/common/http';\n\nconst createTranslateLoader = (http: HttpClient) => new TranslateHttpLoader(http, './assets/i18n/real-time-exercise/', '.json');\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RealTimeExercisePageRoutingModule,\n    TranslateModule.forChild({\n      loader: {\n          provide: TranslateLoader,\n          useFactory: createTranslateLoader,\n          deps: [HttpClient]\n      },\n      isolate: true\n    }),\n    SharedPipesModule,\n    ComponentsModule\n  ],\n  declarations: [RealTimeExercisePage],\n})\nexport class RealTimeExercisePageModule {\n  language$ = this.languageService.language$;\n    constructor(\n        private translateService: TranslateService,\n        private languageService: LanguageService,\n    ) {\n        this.language$.pipe(map(language => language.lang)).subscribe(lang => this.translateService.use(lang));\n    }\n}\n","export default \"html, body, div, span, applet, object, iframe,\\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\\na, abbr, acronym, address, big, cite, code,\\ndel, dfn, em, img, ins, kbd, q, s, samp,\\nsmall, strike, strong, sub, sup, tt, var,\\nb, u, i, center,\\ndl, dt, dd, ol, ul, li,\\nfieldset, form, label, legend,\\ntable, caption, tbody, tfoot, thead, tr, th, td,\\narticle, aside, canvas, details, embed,\\nfigure, figcaption, footer, header, hgroup,\\nmenu, nav, output, ruby, section, summary,\\ntime, mark, audio, video {\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-size: 100%;\\n  font: inherit;\\n  vertical-align: baseline;\\n}\\n\\nol, ul {\\n  list-style: none;\\n}\\n\\n.icon {\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n  display: inline-block;\\n}\\n\\n.icon-alarm {\\n  background-image: url('alarm.svg');\\n}\\n\\n.icon-book {\\n  background-image: url('book.svg');\\n}\\n\\n.icon-calendar {\\n  background-image: url('calendar.svg');\\n}\\n\\n.icon-contact_information {\\n  background-image: url('identification.svg');\\n}\\n\\n.icon-content {\\n  background-image: url('content.svg');\\n}\\n\\n.icon-jogging {\\n  background-image: url('jogging.svg');\\n}\\n\\n.icon-search {\\n  background-image: url('search.svg');\\n}\\n\\n.icon-translate {\\n  background-image: url('translate.svg');\\n}\\n\\n.icon-battery-30 {\\n  background-image: url('battery-30.svg');\\n}\\n\\n.icon-battery-50 {\\n  background-image: url('battery-50.svg');\\n}\\n\\n.icon-battery-80 {\\n  background-image: url('battery-80.svg');\\n}\\n\\n.icon-battery-100 {\\n  background-image: url('battery-100.svg');\\n}\\n\\n.icon-heartbeat {\\n  background-image: url('heartbeat.svg');\\n}\\n\\n.icon-schedule {\\n  background-image: url('schedule.svg');\\n}\\n\\n.icon-clock {\\n  background-image: url('clock.svg');\\n}\\n\\n.icon-bluetooth {\\n  background-image: url('bluetooth.svg');\\n}\\n\\n.mt-8 {\\n  margin-top: 8px;\\n}\\n\\n.mt-16 {\\n  margin-top: 16px;\\n}\\n\\n.mr-8 {\\n  margin-right: 8px;\\n}\\n\\n.mr-16 {\\n  margin-right: 16px;\\n}\\n\\n.mb-8 {\\n  margin-bottom: 8px;\\n}\\n\\n.mb-16 {\\n  margin-bottom: 16px;\\n}\\n\\n.ml-8 {\\n  margin-left: 8px;\\n}\\n\\n.ml-16 {\\n  margin-left: 16px;\\n}\\n\\n.chart-content {\\n  padding-top: 10px;\\n}\\n\\n.title {\\n  margin-bottom: 10px;\\n  text-align: center;\\n}\\n\\n.steps {\\n  margin: 10px 0;\\n  display: flex;\\n  justify-content: space-around;\\n}\\n\\n.steps .step {\\n  list-style: none;\\n  width: 20px;\\n  height: 20px;\\n  border: 1px solid black;\\n  text-align: center;\\n}\\n\\n.steps .step.past {\\n  background-color: #d86619;\\n  color: #fff;\\n}\\n\\n.info {\\n  padding: 0 1rem;\\n  display: flex;\\n  justify-content: space-between;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RoZW1lL3Jlc2V0L19yZXNldC5zY3NzIiwiLi4vLi4vLi4vcmVhbC10aW1lLWV4ZXJjaXNlLnBhZ2Uuc2NzcyIsIi4uLy4uLy4uLy4uLy4uL3RoZW1lL2ljb25zL19pY29ucy5zY3NzIiwiLi4vLi4vLi4vLi4vLi4vdGhlbWUvbGF5b3V0L19tYXJnaW4uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7OztFQWFDLFNBQUE7RUFDQSxVQUFBO0VBQ0EsU0FBQTtFQUNBLGVBQUE7RUFDQSxhQUFBO0VBQ0Esd0JBQUE7QUNDRDs7QURTQTtFQUNDLGdCQUFBO0FDTkQ7O0FDdkJBO0VBQ0UsNEJBQUE7RUFDQSxzQkFBQTtFQUNBLHFCQUFBO0FEMEJGOztBQ3ZCQTtFQUNFLGtDQUFBO0FEMEJGOztBQ3hCQTtFQUNFLGlDQUFBO0FEMkJGOztBQ3pCQTtFQUNFLHFDQUFBO0FENEJGOztBQzFCQTtFQUNFLDJDQUFBO0FENkJGOztBQzNCQTtFQUNFLG9DQUFBO0FEOEJGOztBQzVCQTtFQUNFLG9DQUFBO0FEK0JGOztBQzdCQTtFQUNFLG1DQUFBO0FEZ0NGOztBQzlCQTtFQUNFLHNDQUFBO0FEaUNGOztBQzlCQTtFQUNFLHVDQUFBO0FEaUNGOztBQzlCQTtFQUNFLHVDQUFBO0FEaUNGOztBQzlCQTtFQUNFLHVDQUFBO0FEaUNGOztBQzlCQTtFQUNFLHdDQUFBO0FEaUNGOztBQzlCQTtFQUNFLHNDQUFBO0FEaUNGOztBQzlCQTtFQUNFLHFDQUFBO0FEaUNGOztBQzlCQTtFQUNFLGtDQUFBO0FEaUNGOztBQzlCQTtFQUNFLHNDQUFBO0FEaUNGOztBRTFGSTtFQUNFLGVBQUE7QUY2Rk47O0FFM0ZJO0VBQ0UsZ0JBQUE7QUY2Rk47O0FFekZJO0VBQ0UsaUJBQUE7QUYyRk47O0FFekZJO0VBQ0Usa0JBQUE7QUYyRk47O0FFdkZJO0VBQ0Usa0JBQUE7QUZ5Rk47O0FFdkZJO0VBQ0UsbUJBQUE7QUZ5Rk47O0FFckZJO0VBQ0UsZ0JBQUE7QUZ1Rk47O0FFckZJO0VBQ0UsaUJBQUE7QUZ1Rk47O0FBcEhBO0VBQ0UsaUJBQUE7QUF1SEY7O0FBckhBO0VBQ0UsbUJBQUE7RUFDQSxrQkFBQTtBQXdIRjs7QUF0SEE7RUFDRSxjQUFBO0VBQ0EsYUFBQTtFQUNBLDZCQUFBO0FBeUhGOztBQXhIRTtFQUNFLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0FBMEhKOztBQXpISTtFQUNFLHlCQUFBO0VBQ0EsV0FBQTtBQTJITjs7QUF0SEE7RUFDRSxlQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0FBeUhGIiwiZmlsZSI6InJlYWwtdGltZS1leGVyY2lzZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJodG1sLCBib2R5LCBkaXYsIHNwYW4sIGFwcGxldCwgb2JqZWN0LCBpZnJhbWUsXG5oMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBwLCBibG9ja3F1b3RlLCBwcmUsXG5hLCBhYmJyLCBhY3JvbnltLCBhZGRyZXNzLCBiaWcsIGNpdGUsIGNvZGUsXG5kZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHMsIHNhbXAsXG5zbWFsbCwgc3RyaWtlLCBzdHJvbmcsIHN1Yiwgc3VwLCB0dCwgdmFyLFxuYiwgdSwgaSwgY2VudGVyLFxuZGwsIGR0LCBkZCwgb2wsIHVsLCBsaSxcbmZpZWxkc2V0LCBmb3JtLCBsYWJlbCwgbGVnZW5kLFxudGFibGUsIGNhcHRpb24sIHRib2R5LCB0Zm9vdCwgdGhlYWQsIHRyLCB0aCwgdGQsXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBlbWJlZCxcbmZpZ3VyZSwgZmlnY2FwdGlvbiwgZm9vdGVyLCBoZWFkZXIsIGhncm91cCxcbm1lbnUsIG5hdiwgb3V0cHV0LCBydWJ5LCBzZWN0aW9uLCBzdW1tYXJ5LFxudGltZSwgbWFyaywgYXVkaW8sIHZpZGVvIHtcblx0bWFyZ2luOiAwO1xuXHRwYWRkaW5nOiAwO1xuXHRib3JkZXI6IDA7XG5cdGZvbnQtc2l6ZTogMTAwJTtcblx0Zm9udDogaW5oZXJpdDtcblx0dmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xufVxuLy8gLyogSFRNTDUgZGlzcGxheS1yb2xlIHJlc2V0IGZvciBvbGRlciBicm93c2VycyAqL1xuLy8gYXJ0aWNsZSwgYXNpZGUsIGRldGFpbHMsIGZpZ2NhcHRpb24sIGZpZ3VyZSxcbi8vIGZvb3RlciwgaGVhZGVyLCBoZ3JvdXAsIG1lbnUsIG5hdiwgc2VjdGlvbiB7XG4vLyBcdGRpc3BsYXk6IGJsb2NrO1xuLy8gfVxuLy8gYm9keSB7XG4vLyBcdGxpbmUtaGVpZ2h0OiAxO1xuLy8gfVxub2wsIHVsIHtcblx0bGlzdC1zdHlsZTogbm9uZTtcbn1cbi8vIGJsb2NrcXVvdGUsIHEge1xuLy8gXHRxdW90ZXM6IG5vbmU7XG4vLyB9XG4vLyBibG9ja3F1b3RlOmJlZm9yZSwgYmxvY2txdW90ZTphZnRlcixcbi8vIHE6YmVmb3JlLCBxOmFmdGVyIHtcbi8vIFx0Y29udGVudDogJyc7XG4vLyBcdGNvbnRlbnQ6IG5vbmU7XG4vLyB9XG4vLyB0YWJsZSB7XG4vLyBcdGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4vLyBcdGJvcmRlci1zcGFjaW5nOiAwO1xuLy8gfVxuIiwiQGltcG9ydCAnLi4vLi4vdGhlbWUvdGhlbWUuc2Nzcyc7XHJcblxyXG4uY2hhcnQtY29udGVudCB7XHJcbiAgcGFkZGluZy10b3A6IDEwcHg7XHJcbn1cclxuLnRpdGxlIHtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG4uc3RlcHMge1xyXG4gIG1hcmdpbjogMTBweCAwOztcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xyXG4gIC5zdGVwIHtcclxuICAgIGxpc3Qtc3R5bGU6bm9uZTtcclxuICAgIHdpZHRoOiAyMHB4O1xyXG4gICAgaGVpZ2h0OiAyMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAmLnBhc3Qge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDg2NjE5O1xyXG4gICAgICBjb2xvcjogI2ZmZjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi5pbmZvIHtcclxuICBwYWRkaW5nOiAwIDFyZW07XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbn1cclxuIiwiLmljb24ge1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG59XG5cbi5pY29uLWFsYXJtIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi9hc3NldHMvaWNvbi9hbGFybS5zdmcnKTtcbn1cbi5pY29uLWJvb2sge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL2Fzc2V0cy9pY29uL2Jvb2suc3ZnJyk7XG59XG4uaWNvbi1jYWxlbmRhciB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vYXNzZXRzL2ljb24vY2FsZW5kYXIuc3ZnJyk7XG59XG4uaWNvbi1jb250YWN0X2luZm9ybWF0aW9uIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi9hc3NldHMvaWNvbi9pZGVudGlmaWNhdGlvbi5zdmcnKTtcbn1cbi5pY29uLWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL2Fzc2V0cy9pY29uL2NvbnRlbnQuc3ZnJyk7XG59XG4uaWNvbi1qb2dnaW5nIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi9hc3NldHMvaWNvbi9qb2dnaW5nLnN2ZycpO1xufVxuLmljb24tc2VhcmNoIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi9hc3NldHMvaWNvbi9zZWFyY2guc3ZnJyk7XG59XG4uaWNvbi10cmFuc2xhdGUge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL2Fzc2V0cy9pY29uL3RyYW5zbGF0ZS5zdmcnKTtcbn1cblxuLmljb24tYmF0dGVyeS0zMCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vYXNzZXRzL2ljb24vYmF0dGVyeS0zMC5zdmcnKTtcbn1cblxuLmljb24tYmF0dGVyeS01MCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vYXNzZXRzL2ljb24vYmF0dGVyeS01MC5zdmcnKTtcbn1cblxuLmljb24tYmF0dGVyeS04MCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vYXNzZXRzL2ljb24vYmF0dGVyeS04MC5zdmcnKTtcbn1cblxuLmljb24tYmF0dGVyeS0xMDAge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL2Fzc2V0cy9pY29uL2JhdHRlcnktMTAwLnN2ZycpO1xufVxuXG4uaWNvbi1oZWFydGJlYXQge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL2Fzc2V0cy9pY29uL2hlYXJ0YmVhdC5zdmcnKTtcbn1cblxuLmljb24tc2NoZWR1bGUge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL2Fzc2V0cy9pY29uL3NjaGVkdWxlLnN2ZycpO1xufVxuXG4uaWNvbi1jbG9jayB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vYXNzZXRzL2ljb24vY2xvY2suc3ZnJyk7XG59XG5cbi5pY29uLWJsdWV0b290aCB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vYXNzZXRzL2ljb24vYmx1ZXRvb3RoLnN2ZycpO1xufVxuIiwiLy9tYXJnaW5cbi5te1xuICAmdHsgLy90b3BcbiAgICAmLTgge1xuICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgIH1cbiAgICAmLTE2IHtcbiAgICAgIG1hcmdpbi10b3A6IDE2cHg7XG4gICAgfVxuICB9XG4gICZyeyAvL3JpZ2h0XG4gICAgJi04IHtcbiAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgIH1cbiAgICAmLTE2IHtcbiAgICAgIG1hcmdpbi1yaWdodDogMTZweDtcbiAgICB9XG4gIH1cbiAgJmJ7IC8vYm90dG9tXG4gICAgJi04IHtcbiAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICB9XG4gICAgJi0xNiB7XG4gICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgIH1cbiAgfVxuICAmbHsgLy9sZWZ0XG4gICAgJi04IHtcbiAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG4gICAgfVxuICAgICYtMTYge1xuICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgfVxuICB9XG59XG4iXX0= */\";","import { Chart } from 'chart.js';\nimport * as chartAnnotation from 'chartjs-plugin-annotation';\nimport { BehaviorSubject, Subscription, throwError } from 'rxjs';\nimport { DevicesModalComponent } from 'src/components/modals/devices-modal/devices-modal.component';\nimport { RpeComponent } from 'src/components/modals/rpe/rpe.component';\nimport { PRESCRIPTION } from 'src/constants/common';\nimport {\n    RESPONSE_TYPE_END, RESPONSE_TYPE_ERR, RESPONSE_TYPE_HDA, RESPONSE_TYPE_NDA, RESPONSE_TYPE_SSE,\n    RESPONSE_TYPE_STE, RESPONSE_TYPE_STH, RESPONSE_TYPE_STS, RESPONSE_TYPE_THR\n} from 'src/constants/watch-ble-command';\nimport { IEmergencyMessage } from 'src/models/i-emergency-message';\nimport { IExcerciseStepMessage } from 'src/models/i-excercise-step-message';\nimport { IHrMessage } from 'src/models/ihr-message';\nimport { IStopSignal } from 'src/models/istop-signal';\nimport { AlertService } from 'src/services/alert.service';\nimport { AuthService } from 'src/services/auth.service';\nimport { BleService } from 'src/services/ble.service';\nimport { ChatService } from 'src/services/chat.service';\nimport { CommonService } from 'src/services/common.service';\nimport { ExerciseService, IRpes } from 'src/services/exercise.service';\nimport { LoadingService } from 'src/services/loading.service';\nimport { LoggerService } from 'src/services/logger.service';\nimport { IPrescription } from 'src/services/prescription.service';\nimport { RealTimeExerciseService } from 'src/services/real-time-exercise.service';\nimport { StorageService } from 'src/services/storage.service';\nimport { WatchCommandService } from 'src/services/watch-command.service';\n\nimport { AfterViewInit, Component, NgZone, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\n\nimport { environment as ENV } from '../../environments/environment';\n\n@Component({\n  selector: 'app-real-time-exercise',\n  templateUrl: './real-time-exercise.page.html',\n  styleUrls: ['./real-time-exercise.page.scss'],\n})\nexport class RealTimeExercisePage implements OnInit {\n  canvas: HTMLCanvasElement;\n  chart: any;\n  dataset: Array<IChartItem> = [];\n  realtime = false;\n  reservId: number;\n  channelId: string;\n  prescription: IPrescription;\n  step: number;\n  totalExerciseTime: number;\n  rateArray: number[] = [];\n  seconds = 0;\n  heartRate: number;\n  isToggleChat = false;\n  isShowChat = false;\n  isChatConnected: boolean;\n  interval: any;\n  timer: any;\n  rpesSecondsArray: IRpes[] = [];\n  devices: Array<any> = [];\n  connectSubscription: Subscription = null;\n  isExercising$ = new BehaviorSubject<boolean>(false);\n  rpeMsg: IEmergencyMessage;\n  sub: Subscription;\n  callBATTimes = 0;\n  exerciseData = [];\n  exerciseSubject = new BehaviorSubject<string[]>(this.exerciseData);\n  exerciseDatetime: Date;\n  hrMixMax: { min: string; max: string };\n  callREQTimes = 0;\n  tempExerciseData = [];\n  exerciseFinished = false; // 운동 끝내 여부 판단\n  realtimeConnect: boolean;\n  isExercisingSubscription: Subscription;\n\n  constructor(\n    private realTimeExerciseSvc: RealTimeExerciseService,\n    private ble: BleService,\n    private zone: NgZone,\n    private alertSvc: AlertService,\n    private loggerSvc: LoggerService,\n    private chatSvc: ChatService,\n    private commonSvc: CommonService,\n    private storageSvc: StorageService,\n    private authSvc: AuthService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private exerciseSvc: ExerciseService,\n    private modalController: ModalController,\n    private watchCommandSvc: WatchCommandService,\n    private loadingSvc: LoadingService\n  ) {\n    this.route.queryParams.subscribe((params) => {\n      this.loggerSvc.log(params);\n      if (!!this.router.getCurrentNavigation().extras.state) {\n        this.reservId =\n          this.router.getCurrentNavigation().extras.state.reservId;\n        this.channelId =\n          this.router.getCurrentNavigation().extras.state.channelId;\n\n        this.loggerSvc.log('channelId ? ', this.channelId);\n        this.loggerSvc.log('reservId ? ', this.reservId);\n      }\n    });\n\n    this.sub = new Subscription();\n\n    this.sub.add(\n      this.chatSvc.connection$.subscribe((isConnected) => {\n        this.zone.run(() => {\n          this.isChatConnected = isConnected;\n        });\n      })\n    );\n\n    this.sub.add(\n      this.chatSvc.newOnlineUser$.subscribe((res) => {\n        this.commonSvc.presentToast(\n          '',\n          `${res.userName} 님이 대화방에 참여 하였습니다.`\n        );\n        this.chatSvc.handShake(this.channelId);\n      })\n    );\n\n    this.sub.add(\n      this.chatSvc.leave$.subscribe((res) => {\n        this.commonSvc.presentToast(\n          '',\n          `${res.userName} 님이 대화방을 나갔습니다.`\n        );\n      })\n    );\n\n    this.sub.add(\n      this.chatSvc.recvStopSignalMessage$.subscribe(\n        async (signal: IStopSignal) => {\n          if (signal.channelId === this.channelId) {\n            if (signal.isExerciseStop) {\n              const msg =\n                '의사가 운동을 종료하였습니다. 메뉴화면으로 돌아갑니다.';\n              await this.alertSvc.presentAlert(\n                msg,\n                false,\n                async () => await this.router.navigate(['/menu'])\n              );\n            }\n          }\n        }\n      )\n    );\n  }\n\n  async ngOnInit() {\n    const isConnected = await this.ble.isConnected();\n    if (ENV.useDummyData) {\n      await this.getLastPrescription();\n      return;\n    }\n    if (!isConnected) {\n      await this.scanBLE();\n    } else {\n      await this.getLastPrescription();\n    }\n  }\n\n  ionViewWillEnter() {\n    this.setSubscriptions();\n  }\n\n  setSubscriptions() {\n    this.sub.add(\n      this.ble.SSEResponse$.subscribe({\n        next: (obs) => {\n          if (obs === RESPONSE_TYPE_SSE) {\n            this.ble.serviceTypeSubject.next(RESPONSE_TYPE_THR);\n          }\n        },\n        error: (e) => {},\n        complete: () => {},\n      })\n    );\n\n    this.sub.add(\n      this.ble.THRResponse$.subscribe({\n        next: async (obs) => {\n          if (obs === RESPONSE_TYPE_END) {\n            this.ble.realtimeDataSubject.next('');\n            this.exerciseFinished = true;\n          } else {\n            const thrPattern = new RegExp(\n              /^THR#[0-9]_[0-9]{1,3}\\$[0-9]{1,4}@$/g\n            );\n            if (thrPattern.test(obs)) {\n              this.ble.realtimeDataSubject.next(obs);\n            }\n          }\n        },\n        error: (e) => {},\n        complete: () => {},\n      })\n    );\n\n    // update chart\n    this.sub.add(\n      this.ble.realtimeData$.subscribe({\n        next: (data) => {\n          if (data === '') {\n            setTimeout(async () => {\n              await this.loadingSvc.create('Getting data...');\n              await this.loadingSvc.present();\n              await this.watchCommandSvc.sendBAT();\n            }, 1000);\n            return;\n          }\n\n          if (data === undefined) {\n            return;\n          }\n          //step\n          const step = +data.substring(\n            data.indexOf('#') + 1,\n            data.indexOf('_')\n          );\n          //hr data\n          const rate = +data.substring(\n            data.indexOf('_') + 1,\n            data.indexOf('$')\n          );\n          // second\n          const second = +data.substring(\n            data.indexOf('$') + 1,\n            data.indexOf('@')\n          );\n          const baseSeconds = this.realTimeExerciseSvc.getBaseSeconds(\n            step,\n            this.prescription\n          );\n          if (second === 1) {\n            //단계가 올라감\n            const prescriptionSteps = this.prescription.steps.find(\n              (v) => v.sequence === step\n            );\n            const exerciseStepMsg: IExcerciseStepMessage = {\n              channelId: this.channelId,\n              currentStep: prescriptionSteps,\n              currentStepCount: step,\n              exerciseType: this.prescription.exerciseTypes[0],\n              messageStatus: 'send',\n              messageType: 'ExerciseStep',\n              sendDateTime: new Date(),\n              totalMinute: this.totalExerciseTime,\n              totalStepCount: this.prescription.steps.length,\n              userEmail: this.authSvc.username,\n            };\n            this.chatSvc.sendExerciseStep(exerciseStepMsg);\n          }\n          this.heartRate = rate;\n          this.zone.run(() => {\n            this.step = step;\n            this.seconds = second + baseSeconds;\n          });\n          if (this.available) {\n            this.addData({\n              label: second + baseSeconds,\n              data: rate,\n            } as IChartItem);\n            this.sendHeartRate(rate, step, second + baseSeconds);\n            this.rateArray.push(rate);\n          }\n        },\n        error: (error) => {},\n        complete: () => {},\n      })\n    );\n\n    this.sub.add(\n      this.ble.BATService$.subscribe({\n        next: async (obs) => {\n          const batPattern = new RegExp(/^BAT#[0-9]{1,3}@$/g);\n          if (batPattern.test(obs)) {\n            this.callBATTimes = 0;\n            await this.loadingSvc.dismiss();\n            this.ble.handleBAT(obs);\n            if (this.realtimeConnect || this.exerciseFinished) {\n              await this.watchCommandSvc.sendRND();\n            } else {\n              await this.watchCommandSvc.sendSTS();\n            }\n          } else {\n            if (this.callBATTimes >= 10) {\n              await this.loadingSvc.dismiss();\n              this.realtimeConnect = false;\n              await this.ble.disconnect();\n              await this.presentScanFailedAlert();\n            } else {\n              this.callBATTimes++;\n              await this.watchCommandSvc.sendBAT();\n            }\n          }\n        },\n        error: async (err) => {\n          this.loggerSvc.error('BAT error', err);\n        },\n        complete: () => {\n          this.loggerSvc.info('BAT complete');\n        },\n      })\n    );\n\n    this.sub.add(\n      this.ble.RNDService$.subscribe(async (obs) => {\n        if (obs === RESPONSE_TYPE_HDA) {\n          await this.loadingSvc.dismiss();\n          await this.loadingSvc.present();\n          await this.watchCommandSvc.sendRTS();\n          await this.loadingSvc.create(\n            `디바이스에 저장된 데이터들을 받아오는 중입니다. 잠시만 기다려주세요......`\n          );\n          await this.loadingSvc.present();\n          this.exerciseData = [];\n        } else if (obs === RESPONSE_TYPE_NDA) {\n          if (this.exerciseFinished) {\n            await this.ble.disconnect();\n            this.rateArray = [];\n            this.isExercising$.next(false);\n          } else {\n            await this.watchCommandSvc.sendSTS();\n          }\n        }\n      })\n    );\n\n    this.sub.add(\n      this.ble.RTSService$.subscribe(async (obs) => {\n        if (obs === RESPONSE_TYPE_ERR) {\n          await this.loadingSvc.dismiss();\n        }\n        const [y, M, d, h, m] = obs\n          .substring(obs.indexOf('#') + 1, obs.lastIndexOf('@'))\n          .split('_');\n        this.exerciseDatetime = new Date(+('20' + y), +M - 1, +d, +h, +m);\n        await this.watchCommandSvc.sendRTH();\n      })\n    );\n\n    this.sub.add(\n      this.ble.RTHService$.subscribe(async (obs) => {\n        if (obs === RESPONSE_TYPE_ERR) {\n          await this.loadingSvc.dismiss();\n        }\n        const [min, max] = obs\n          .substring(obs.indexOf('#') + 1, obs.lastIndexOf('@'))\n          .split('_');\n        this.hrMixMax = { min, max };\n        await this.watchCommandSvc.sendRTE();\n      })\n    );\n\n    this.sub.add(\n      this.ble.RTEService$.subscribe(async (obs) => {\n        if (obs === RESPONSE_TYPE_ERR) {\n          await this.loadingSvc.dismiss();\n        }\n        await this.watchCommandSvc.sendRHD();\n      })\n    );\n\n    this.sub.add(\n      this.ble.RHDService$.subscribe(async (obs) => {\n        if (obs === RESPONSE_TYPE_ERR) {\n          await this.loadingSvc.dismiss();\n        }\n        if (obs === RESPONSE_TYPE_END) {\n          this.exerciseSubject.next(this.exerciseData);\n          await this.loadingSvc.dismiss();\n        } else {\n          this.tempExerciseData.push(obs);\n          this.callREQTimes++;\n          await this.watchCommandSvc.sendREQ();\n        }\n      })\n    );\n\n    this.sub.add(\n      this.ble.REQService$.subscribe(async (obs) => {\n        if (obs === RESPONSE_TYPE_ERR) {\n          await this.loadingSvc.dismiss();\n        } else {\n          this.tempExerciseData.push(obs);\n          const lastData =\n            this.tempExerciseData[this.tempExerciseData.length - 1];\n          if (this.tempExerciseData.length > 1) {\n            const exerciseDataPattern = new RegExp(/.*\\@$/g);\n            if (\n              lastData !==\n                this.tempExerciseData[this.tempExerciseData.length - 2] ||\n              !exerciseDataPattern.test(lastData)\n            ) {\n              if (this.callREQTimes >= 10) {\n                this.realtimeConnect = false;\n                await this.loadingSvc.dismiss();\n                await this.ble.disconnect();\n                await this.presentScanFailedAlert();\n              } else {\n                this.tempExerciseData.slice(0, 1);\n                this.callREQTimes++;\n                await this.watchCommandSvc.sendREQ();\n              }\n            } else {\n              this.callREQTimes = 0;\n              this.tempExerciseData = [];\n              this.exerciseData.push(lastData);\n              await this.watchCommandSvc.sendROK();\n            }\n          }\n        }\n      })\n    );\n\n    this.sub.add(\n      this.ble.ROKService$.subscribe(async (obs) => {\n        if (obs === RESPONSE_TYPE_ERR) {\n          await this.loadingSvc.dismiss();\n        }\n        if (obs === RESPONSE_TYPE_END) {\n          this.exerciseSubject.next(this.exerciseData);\n          await this.loadingSvc.dismiss();\n          const rpeModal = await this.modalController.create({\n            component: RpeComponent,\n            backdropDismiss: false,\n            cssClass: 'rpe-modal',\n          });\n\n          await rpeModal.present();\n          const { data } = await rpeModal.onWillDismiss();\n          const prescription = await this.storageSvc.get(PRESCRIPTION);\n          await this.exerciseSvc.sendExerciseData(\n            prescription,\n            data.rpeValue,\n            this.exerciseData,\n            this.exerciseDatetime,\n            this.hrMixMax\n          );\n          this.sendStopSignal();\n          // await this.loadingSvc.present();\n          // await this.watchCommandSvc.sendRND();\n        } else {\n          this.callREQTimes++;\n          this.tempExerciseData.push(obs);\n          await this.watchCommandSvc.sendREQ();\n        }\n      })\n    );\n\n    this.sub.add(\n      this.ble.STSService$.subscribe({\n        next: async (obs) => {\n          if (obs === RESPONSE_TYPE_STS) {\n            await this.watchCommandSvc.sendSTH(this.prescription);\n          }\n        },\n        error: (err) => {\n          this.loggerSvc.error('STS error', err);\n        },\n        complete: () => {\n          this.loggerSvc.info('STS complete');\n        },\n      })\n    );\n\n    this.sub.add(\n      this.ble.STHService$.subscribe({\n        next: async (obs) => {\n          if (obs === RESPONSE_TYPE_STH) {\n            await this.watchCommandSvc.sendSTE(this.prescription);\n          }\n        },\n        error: (err) => {\n          this.loggerSvc.error('STH error', err);\n        },\n        complete: () => {\n          this.loggerSvc.info('STH complete');\n        },\n      })\n    );\n\n    this.sub.add(\n      this.ble.STEService$.subscribe({\n        next: async (obs) => {\n          if (obs.includes(RESPONSE_TYPE_STE)) {\n            this.isExercising$.next(true);\n          }\n        },\n        error: (err) => {\n          this.loggerSvc.error('STE error', err);\n        },\n        complete: () => {\n          this.loggerSvc.info('STE complete');\n        },\n      })\n    );\n  }\n\n  sendStopSignal() {\n    const signal: IStopSignal = {\n      messageType: 'TEXT',\n      sendDateTime: new Date(),\n      messageStatus: 'send',\n      userEmail: this.authSvc.username,\n      channelId: this.channelId,\n      isExerciseStop: true,\n    };\n    this.loggerSvc.log('stop signal', signal);\n    this.chatSvc.sendStopSignal(signal);\n  }\n\n  getRpesValue() {\n    const rpesValue = this.rateArray.map((_) => '-1');\n    this.rpesSecondsArray.forEach((data) => {\n      rpesValue[data.second] = data.rpe + '';\n    });\n    return rpesValue.join(',');\n  }\n\n  checkIsBefore5Minutes(dateFrom: Date, dateTo: Date) {\n    const now = new Date().getTime();\n    const reservationDateFrom = new Date(dateFrom).getTime();\n    const reservationDateTo = new Date(dateTo).getTime();\n    const min = 5;\n    const availableDateFrom = reservationDateFrom - min * 60 * 1000;\n    return reservationDateTo >= now && availableDateFrom <= now;\n  }\n\n  async scanBLE() {\n    this.devices = [];\n    await this.loadingSvc.create('Scan...');\n    await this.loadingSvc.present();\n    this.ble.scan().subscribe({\n      next: async (device) => {\n        if (device) {\n          if (this.devices.indexOf((d) => d.id === device.id) < 0) {\n            this.devices.push(device);\n          }\n        }\n      },\n      error: async (e) => {\n        await this.loadingSvc.dismiss();\n        throwError(e);\n        await this.presentScanFailedAlert();\n      },\n      complete: async () => {\n        await this.loadingSvc.dismiss();\n        if (this.devices.length > 0) {\n          const modal = await this.modalController.create({\n            component: DevicesModalComponent,\n            cssClass: 'devices-modal',\n            backdropDismiss: false,\n            componentProps: {\n              devicesList: this.devices,\n              // TODO: i18n\n              title:\n                '시계와 연결되어 있지 않습니다. 데이터 전송하시려면 디바이스를 선택해주세요.',\n            },\n          });\n          await modal.present();\n\n          const { data } = await modal.onWillDismiss();\n          if (data) {\n            await this.connect(data.id);\n          }\n        } else {\n          await this.presentScanFailedAlert();\n        }\n      },\n    });\n  }\n\n  async presentScanFailedAlert() {\n    const alertOptions = {\n      message: '스캔 실패했습니다. 디시 시도하시겠습니까?',\n      buttons: [\n        {\n          text: '확인',\n          handler: async () => {\n            await this.scanBLE();\n          },\n        },\n        {\n          text: '취소',\n          handler: () => {},\n        },\n      ],\n      backdropDismiss: false,\n    };\n    await this.alertSvc.presentCustomizeAlert(alertOptions);\n  }\n\n  async connect(deviceId: string) {\n    await this.loadingSvc.create('Connect...');\n    await this.loadingSvc.present();\n    this.connectSubscription = this.ble.connect(deviceId).subscribe({\n      next: async () => {\n        this.exerciseFinished = false;\n        this.realtimeConnect = true;\n        await this.loadingSvc.dismiss();\n        await this.getLastPrescription();\n      },\n      error: async (e) => {\n        await this.loadingSvc.dismiss();\n        this.realtimeConnect = false;\n        this.ble.realtimeDataSubject.next();\n        // if (this.isExercising$.value) {\n             /** 연결 끊어질 때 처음부터 시작하려면 */\n        //   await this.presentConnectInterruptAlert(deviceId);\n        // } else {\n        /** 연결 끊어질 때 그냥 다시 연결해서 남어지는 것을 계속 진행하려면 */\n        await this.presentConnectFailedAlert(deviceId);\n        // }\n        throwError(e);\n      },\n      complete: () => {},\n    });\n    return this.connectSubscription as Subscription;\n  }\n\n  async presentConnectFailedAlert(deviceId) {\n    const alertOptions = {\n      message: '연결 실패했습니다. 디시 시도하시겠습니까?',\n      buttons: [\n        {\n          text: '확인',\n          handler: async () => {\n            this.connectSubscription.unsubscribe();\n            await this.connect(deviceId);\n          },\n        },\n        {\n          text: '취소',\n          handler: async () => {\n            this.isExercising$.next(false);\n            this.connectSubscription.unsubscribe();\n          },\n        },\n      ],\n      backdropDismiss: false,\n    };\n    await this.alertSvc.presentCustomizeAlert(alertOptions);\n  }\n\n  async presentConnectInterruptAlert(deviceId) {\n    const alertOptions = {\n      message: `연결 중단되었습니다. 디시 운동하시겠습니까?`,\n      buttons: [\n        {\n          text: '확인',\n          handler: async () => {\n            this.isExercising$.next(false);\n            this.ble.serviceTypeSubject.next();\n            this.connectSubscription.unsubscribe();\n            // reset chart\n            this.rateArray = [];\n            this.realtime = true;\n            if (\n              this.chart.data.datasets &&\n              this.chart.data.datasets[0]?.data.length > 0\n            ) {\n              this.removeData(this.chart);\n              this.step = 0;\n              this.seconds = 0;\n              this.chart.destroy();\n              const hrChart = document.getElementById('hrChart');\n              const location = document.getElementById('canvas');\n              location.removeChild(hrChart);\n              this.createCanvas();\n              setTimeout(() => {\n                this.canvas.id = 'hrChart';\n                location.appendChild(this.canvas);\n              }, 1000);\n            }\n            await this.presentResetWatchAlert(deviceId);\n          },\n        },\n        {\n          text: '취소',\n          handler: async () => {\n            this.isExercising$.next(false);\n            this.connectSubscription.unsubscribe();\n          },\n        },\n      ],\n      backdropDismiss: false,\n    };\n    await this.alertSvc.presentCustomizeAlert(alertOptions);\n  }\n\n  async presentResetWatchAlert(deviceId) {\n    const alertOptions = {\n      message:\n        '다시 운동하시려면 시계를 리셋하십시오. <br>시계를 리셋하셨습니까?',\n      buttons: [\n        {\n          text: '리셋 완료',\n          handler: async () => {\n            await this.connect(deviceId);\n          },\n        },\n        {\n          text: '취소',\n          handler: async () => {\n            this.isExercising$.next(false);\n            this.connectSubscription.unsubscribe();\n          },\n        },\n      ],\n      backdropDismiss: false,\n    };\n    await this.alertSvc.presentCustomizeAlert(alertOptions);\n  }\n\n  ionViewWillLeave(): void {\n    if (this.connectSubscription) {\n      this.connectSubscription.unsubscribe();\n    }\n    this.sub.unsubscribe();\n  }\n\n  ionViewDidLeave() {\n    // this.stopExercise();\n    this.chatSvc.leaveAsync(this.channelId).then(() => {\n      this.loggerSvc.log('진료모임을 나갔습니다.');\n      this.chatSvc.stopAsync().then(() => {\n        this.loggerSvc.log('실시간 서버와 접속을 종료했습니다.');\n      });\n    });\n  }\n\n  sendEmergency(rpeValue: number) {\n    this.addRpe(rpeValue);\n    const msg: IEmergencyMessage = {\n      channelId: this.channelId,\n      messageStatus: 'send',\n      messageType: 'EMERGENCY',\n      rate: this.heartRate,\n      seconds: this.seconds,\n      sendDateTime: new Date(),\n      userEmail: this.authSvc.username,\n      rpeValue,\n    };\n    this.chatSvc.sendEmergency(msg);\n    this.rpeMsg = msg;\n    this.rpesSecondsArray.push({ rpe: rpeValue, second: this.seconds });\n  }\n\n  createCanvas() {\n    this.canvas = document.createElement('canvas');\n    const ctx = this.canvas.getContext('2d');\n\n    Chart.plugins.register({ chartAnnotation });\n    setTimeout(() => {\n      this.chart = new Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: this.labels,\n          datasets: [\n            {\n              label: '# of Heart beat',\n              data: [],\n              spanGaps: false,\n              lineTension: 0.2,\n              backgroundColor: 'rgba(255, 0, 127, 0)',\n              borderColor: 'rgba(255, 0, 127, 1)',\n              pointBackgroundColor: 'rgba(255, 0, 127, 1)',\n              pointRadius: 0,\n              borderWidth: 2,\n              datalabels: {\n                display: false,\n              },\n            },\n            {\n              label: 'Hardness',\n              data: [],\n              backgroundColor: 'rgba(0, 0, 0, 0)',\n              borderColor: 'rgba(0, 0, 0, 1)',\n              pointBackgroundColor: 'rgba(0, 0, 0, 1)',\n              pointRadius: 6,\n              borderWidth: 1,\n              pointStyle: 'rect',\n              showLine: false,\n              datalabels: {\n                display: true,\n                align: 'top',\n                anchor: 'end',\n                color: 'black',\n                font: {\n                  weight: 'bold',\n                },\n              },\n            },\n          ],\n        },\n        options: {\n          legend: {\n            display: false,\n          },\n          onclick: (point, event) => {\n            this.loggerSvc.log('point', point, 'event', event);\n          },\n          scales: {\n            yAxes: [\n              // {\n              //   ticks: {\n              //     beginAtZero: false,\n              //   },\n              // },\n            ],\n          },\n          annotation: {\n            annotations: [{\n              type: 'box',\n              xScaleID: 'x-axis-0',\n              yScaleID: 'y-axis-0',\n              yMin: this.prescription.hrMin,\n              yMax: this.prescription.hrMax,\n              borderWidth: 1,\n              backgroundColor: 'rgba(20, 173, 35, 0.2)',\n              borderColor: 'rgba(20, 173, 35, 0.2)',\n            }]\n          }\n        },\n      });\n      this.loggerSvc.log('chart', this.chart);\n    }, 100);\n    setTimeout(() => {\n      const location = document.getElementById('canvas');\n      this.canvas.id = 'hrChart';\n      location.appendChild(this.canvas);\n    }, 300);\n  }\n\n  addRpe(rpe) {\n    const heartRatesData = this.heartRateData;\n    if (!!heartRatesData && heartRatesData.length > 0) {\n      const latestHr = heartRatesData[heartRatesData.length - 1];\n      const latestLable = this.labels[this.labels.length - 1];\n      const point = {\n        x: latestLable,\n        y: latestHr,\n        z: rpe,\n      };\n\n      this.loggerSvc.log('rpe', point);\n      this.rpeData.push(point);\n\n      this.chart.update();\n    }\n  }\n\n  get rpeData() {\n    return this.chart.data.datasets[1].data;\n  }\n\n  get heartRateData() {\n    return this.chart.data.datasets[0].data;\n  }\n\n  get labels(): number[] {\n    return this.chart?.data?.labels || [];\n  }\n\n  async setExerciseInfoData() {\n    this.rateArray = [];\n    this.realtime = true;\n\n    this.authSvc.extendToken().subscribe(async (isRefreshed) => {\n      if (isRefreshed) {\n        await this.loadingSvc.create('Getting data...');\n        await this.loadingSvc.present();\n        await this.watchCommandSvc.sendBAT();\n      }\n    });\n  }\n\n  removeData(chart) {\n    chart.data.labels.pop();\n    chart.data.datasets.forEach((dataset) => {\n      dataset.data.pop();\n    });\n    chart.update();\n  }\n\n  async startExercise() {\n    if (ENV.useDummyData) {\n      this.generateRandomHeartRate();\n    } else {\n      const isConnected = await this.ble.isConnected();\n      if (!isConnected) {\n        await this.scanBLE();\n      } else {\n        //reset chart\n        if (\n          this.chart.data.datasets &&\n          this.chart.data.datasets[0]?.data.length > 0\n        ) {\n          this.removeData(this.chart);\n          this.step = 0;\n          this.seconds = 0;\n          this.chart.destroy();\n          const hrChart = document.getElementById('hrChart');\n          const location = document.getElementById('canvas');\n          location.removeChild(hrChart);\n          this.createCanvas();\n          setTimeout(() => {\n            this.canvas.id = 'hrChart';\n            location.appendChild(this.canvas);\n          }, 1000);\n        }\n        await this.setExerciseInfoData();\n      }\n    }\n  }\n\n  async stopExercise() {\n    if (!!this.interval && !!this.timer) {\n      clearInterval(this.interval);\n      clearTimeout(this.timer);\n      this.interval = null;\n      this.timer = null;\n    }\n    this.exerciseData = this.exerciseData.map((res) => Number(res));\n    await this.loadingSvc.dismiss();\n    const rpeModal = await this.modalController.create({\n      component: RpeComponent,\n      backdropDismiss: false,\n      cssClass: 'rpe-modal',\n    });\n\n    await rpeModal.present();\n    const { data } = await rpeModal.onWillDismiss();\n    const prescription = await this.storageSvc.get(PRESCRIPTION);\n    await this.exerciseSvc\n      .postExercise(\n        prescription,\n        this.exerciseData,\n        data.rpeValue,\n        this.exerciseDatetime,\n        this.hrMixMax,\n        ''\n      )\n      .toPromise();\n    this.sendStopSignal();\n  }\n\n  addData(item: IChartItem) {\n    this.labels.push(item.label);\n    this.heartRateData.push(item.data);\n\n    if (this.labels.length > 100) {\n      this.labels.splice(0, 1);\n      this.heartRateData.splice(0, 1);\n    }\n\n    this.chart.update();\n  }\n\n  get available(): boolean {\n    return this.realtime;\n  }\n\n  async getLastPrescription() {\n    this.prescription = await this.storageSvc.get(PRESCRIPTION);\n    this.createCanvas();\n    this.loggerSvc.log('prescription', this.prescription);\n    if (!this.prescription) {\n      await this.alertSvc.presentAlert(\n        `You have not gotten the latest prescription`\n      );\n      this.router.navigate(['/menu']);\n    } else {\n      this.totalExerciseTime = this.prescription.steps\n        .map((step) => step.minute)\n        .reduce((accr, curr) => accr + curr);\n    }\n  }\n\n  async toggleChat() {\n    this.isShowChat = !this.isShowChat;\n  }\n\n  getUpdatedValue(e) {\n    this.isShowChat = e;\n  }\n\n  private generateRandomHeartRate() {\n    let second = 0;\n    let step = 1;\n    let totalMinutes = 0;\n\n    this.getLastPrescription().then(() => {\n      this.loggerSvc.log('prescription', this.prescription);\n      this.hrMixMax = { min: this.prescription.hrMin + '', max: this.prescription.hrMax + '' };\n      const totalStepCount = this.prescription.steps.length;\n      let currentPrescriptionStep = this.prescription.steps.find(\n        (s) => s.sequence === step\n      );\n      let exerciseStepMsg: IExcerciseStepMessage = {\n        channelId: this.channelId,\n        currentStep: currentPrescriptionStep,\n        currentStepCount: step,\n        exerciseType: this.prescription.exerciseTypes[0],\n        messageStatus: 'send',\n        messageType: 'ExerciseStep',\n        sendDateTime: new Date(),\n        totalMinute: this.totalExerciseTime,\n        totalStepCount,\n        userEmail: this.authSvc.username,\n      };\n      this.chatSvc.sendExerciseStep(exerciseStepMsg);\n\n      this.interval = setInterval(() => {\n        this.timer = setTimeout(() => {\n          const rate = Math.floor(Math.random() * 100);\n          second++;\n          const minute = Math.floor(second / 60);\n\n          if (totalMinutes < this.totalExerciseTime) {\n            this.loggerSvc.log(\n              'minute',\n              minute,\n              'step minute',\n              currentPrescriptionStep.minute\n            );\n            if (minute - totalMinutes >= currentPrescriptionStep.minute) {\n              totalMinutes += currentPrescriptionStep.minute;\n              step++;\n              currentPrescriptionStep = this.prescription.steps.find(\n                (s) => s.sequence === step\n              );\n              exerciseStepMsg = {\n                ...exerciseStepMsg,\n                currentStep: currentPrescriptionStep,\n                currentStepCount: step,\n              };\n              this.chatSvc.sendExerciseStep(exerciseStepMsg);\n            }\n          }\n\n          this.loggerSvc.log('totalExcerciseTime ', this.totalExerciseTime);\n\n          const baseSeconds = this.realTimeExerciseSvc.getBaseSeconds(\n            1,\n            this.prescription\n          );\n          this.loggerSvc.log('prescription', this.prescription);\n          this.loggerSvc.log('base seconds', baseSeconds);\n\n          this.addData({\n            label: second + baseSeconds,\n            data: rate,\n          } as IChartItem);\n          this.sendHeartRate(rate, 1, second + baseSeconds);\n          this.exerciseData.push(rate);\n          this.seconds = second;\n          this.heartRate = rate;\n        }, 100);\n      }, 100);\n    });\n  }\n\n  private sendHeartRate(rate: number, round: number, second: number) {\n    this.chatSvc.sendHeartRate({\n      channelId: this.channelId,\n      messageStatus: 'send',\n      messageType: 'HeartRate',\n      rate,\n      round,\n      seconds: second,\n      userEmail: this.authSvc.username,\n      sendDateTime: new Date(),\n    } as IHrMessage);\n  }\n}\n\ninterface IChartItem {\n  label: number;\n  data: number;\n}\n"],"sourceRoot":"webpack:///"}